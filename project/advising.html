<!DOCTYPE html>
<html>
<head>
<style>
	#upload_target {
	}
</style>
<link rel="stylesheet" type="text/css" href="css/template.css" />
<link rel="shortcut icon" href="http://www.stanford.edu/~alexoz/images/alexoz_logo_favicon.ico" type="image/x-icon" />
<meta charset="UTF-8" />
<title>Alex Omid-Zohoor</title>
</head>
<body>
	<div id="main">
		<div class="row" id="banner">
		</div>
		<div id="header">
			<div id="logo_and_name">
				<a href="index.html">
					<img id="logo" src="images/alexoz_logo_100px.png" alt="alexoz_logo" />
				</a>			
				<h1>alex<span id="oz">oz</span></h1>
			</div>
			<table id="menu">
				<tr><td><a href="bio.html">BIO</a></td><td>+</td></tr>
				<tr><td><a href="quals.html">QUALS</a></td><td>+</td></tr>
				<tr><td><a href="advising.html">ADVISING</a></td><td>+</td></tr>
				<tr><td><a href="projects.html">PROJECTS</a></td><td>+</td></tr>
			</table>
		</div>
		<div id="content">
			<form id="file_upload_form" method="post" enctype="multipart/form-data" action="cgi-bin/upload.php">
			<input name="file" id="file" size="27" type="file" /><br />
			<input type="submit" name="action" value="Upload File" /><br />
			<iframe id="upload_target" name="upload_target" src="" style="width:100px;height:100px;border:1px solid #ccc;"></iframe>
			</form>
			<div id="upload_details"></div>

			<form action="cgi-bin/write_text.php" method="post">
			<label>Suggestions:</label>
			<textarea cols=40 rows=10 name="suggestions"></textarea>
			<br />
			<input type="submit" name="submit" value="Submit" />
			</form>
		</div>
	</div>
	<script type="text/javascript">
		function init() {
				document.getElementById('file_upload_form').onsubmit=function() {
				document.getElementById('file_upload_form').target = 'upload_target'; //'upload_target' is the name of the iframe
				document.getElementById("upload_target").onload = uploadDone; //This function should be called when the iframe has compleated loading
				// That will happen when the file is completely uploaded and the server has returned the data we need.
			}
		}
		function uploadDone() { //Function will be called when iframe is loaded
			var ret = frames['upload_target'].document.getElementsByTagName("body")[0].innerHTML;
			var data = eval("("+ret+")"); //Parse JSON // Read the below explanations before passing judgment on me
			if(data.success) { //This part happens when the image gets uploaded.
				document.getElementById("upload_details").innerHTML = data.pdf_text;
			}
			else if(data.failure) { //Upload failed - show user the reason.
				alert("Upload Failed: " + data.failure);
			}	
		}
		window.onload=init;
	</script>
</body>
</html>
