<!DOCTYPE html>
<html>
<head>
<style>
	#main {
		font-family: serif;
		margin: 0px;
	}

	img {
		float: left;
		margin: 10px;
	}

	.tag {
		position: absolute;
		width: 100px;
		height: 100px;
		left: 100px;
		top: 100px;
		border:	5px solid blue;
		display: inline;
	}

	.tag_text {
		color: white;
		position: relative;
		margin: 0px;
		left: 0px;
		top: 0px;
	}

	.col {
		float: left;
	}

</style>
<meta charset="UTF-8" />
<title>Photo Tagging</title>
</head>
<body>
	<div id="main">
		<img src="photo.jpg" alt="Awesome Photo" />
		<div id="the_tag" class="tag">
			<p class="tag_text">Patrick</p>
		</div>
		<div class="col">
			<h2>Tag Entry</h2>
			<form id="add_tag">
				<label>Name:<input id="tag" type="text" name="Tag" /></label>
				<label><input type="button" value="Add Tag" onclick="addTag();" /></label><br />
			</form>
			<h2>Display Options</h2>
			<form id="display_options">
				<label>Show Tags<input type="radio" name="tagDisplay" value="Show Tags" /></label>
				<label>Hide Tags<input type="radio" name="tagDisplay" value="Hide Tags" /></label>
			</form>
		</div>
	</div>
	<script type="text/javascript">
	// Global variables
	var addingTag;
	var clickNumber = 0;
	var tagArray = [];
	var currentTag;

	function Tag(name, x1, y1, x2, y2) {
		this.name = name;
		this.x1 = x1;
		this.y1 = y1;
		this.x2 = x2;
		this.y2 = y2;
	}

	document.onclick = handleClick;

	function addTag() {
		addingTag = true;
		currentTag = new Tag();
		currentTag.name = document.getElementById("tag").value;
		tagArray.push(currentTag);
	}

	function handleClick(evt) {
		evt = (evt) ? evt : ((event) ? event : null);
		if (addingTag) {
			alert(clickNumber);
			switch (clickNumber) {
				case 1: 
					currentTag.x1 = evt.clientX;
					currentTag.y1 = evt.clientY;
					clickNumber++;
					break;
				case 2:
					alert("2");
					currentTag.x2 = evt.clientX;
					currentTag.y2 = evt.clientY;
					drawTag(currentTag);
					clickNumber++;
					break;
				default:
					clickNumber++;
			}
		}
		if (clickNumber > 2) {
			clickNumber = 0;
			addingTag = false;
		}

	}

	function drawTag(tag) {
		var x = document.getElementById("the_tag");
		x.style.width = getWidth(currentTag);
		x.style.height = getHeight(currentTag);
		x.style.left = getLeft(currentTag);
		x.style.top = getTop(currentTag);
	}

	function getWidth(tag) {
		return (tag.x2 - tag.x1) + "px";
	}

	function getHeight(tag) {
		return (tag.y2 - tag.y1) + "px";
	}

	function getLeft(tag) {
		return tag.x1 + "px";
	}

	function getTop(tag) {
		return tag.y1 + "px";
	}



	</script>
</body>
</html>
